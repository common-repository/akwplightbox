(function(A){prettyPhoto={options:{"animationSpeed":"fast","padding":40},init:function(){prettyPhoto.imagesArray=[];A("a[rel^='prettyOverlay']").each(function(){prettyPhoto.imagesArray[prettyPhoto.imagesArray.length]=this;A(this).bind("click",function(){prettyPhoto.open(this);return false})})},open:function(B){prettyPhoto.caller=B;theRel=A(B).attr("rel");galleryRegExp=/\[(?:.*)\]/;theGallery=galleryRegExp.exec(theRel);prettyPhoto.setCount=0;prettyPhoto.setPosition=0;prettyPhoto.arrayPosition=0;prettyPhoto.isSet=false;for(i=0;i<prettyPhoto.imagesArray.length;i++){if(A(prettyPhoto.imagesArray[i]).attr("rel").indexOf(theGallery)!=-1){prettyPhoto.setCount++;if(prettyPhoto.setCount>1){prettyPhoto.isSet=true}if(A(prettyPhoto.imagesArray[i]).attr("href")==A(B).attr("href")){prettyPhoto.setPosition=prettyPhoto.setCount;prettyPhoto.arrayPosition=i}}}prettyPhoto.buildOverlay(prettyPhoto.isSet);A("div.pictureHolder span.currentText").html("<span>"+prettyPhoto.setPosition+"</span>/"+prettyPhoto.setCount);prettyPhoto.centerPicture();A("div.pictureHolder #fullResImage").fadeTo(prettyPhoto.options["animationSpeed"],0,function(){A(".loaderIcon").show();prettyPhoto.preload()})},next:function(){prettyPhoto.arrayPosition++;prettyPhoto.setPosition++;A("div.pictureHolder #fullResImage").fadeTo(prettyPhoto.options["animationSpeed"],0,function(){A(".loaderIcon").show();prettyPhoto.preload()});A("div.pictureHolder .hoverContainer").fadeOut(prettyPhoto.options["animationSpeed"]);A("div.pictureHolder .details").fadeOut(prettyPhoto.options["animationSpeed"],function(){prettyPhoto.checkPosition()})},previous:function(){prettyPhoto.arrayPosition--;prettyPhoto.setPosition--;A("div.pictureHolder #fullResImage").fadeTo(prettyPhoto.options["animationSpeed"],0,function(){A(".loaderIcon").show();prettyPhoto.preload()});A("div.pictureHolder .hoverContainer").fadeOut(prettyPhoto.options["animationSpeed"]);A("div.pictureHolder .details").fadeOut(prettyPhoto.options["animationSpeed"],function(){prettyPhoto.checkPosition()})},checkPosition:function(){(prettyPhoto.setPosition==prettyPhoto.setCount)?A("div.pictureHolder a.next").hide():A("div.pictureHolder a.next").show();(prettyPhoto.setPosition==1)?A("div.pictureHolder a.previous").hide():A("div.pictureHolder a.previous").show();A("div.pictureHolder span.currentText span").text(prettyPhoto.setPosition);if(prettyPhoto.isSet){if(A(prettyPhoto.imagesArray[prettyPhoto.arrayPosition]).attr("title")){A("div.pictureHolder .description").text(A(prettyPhoto.imagesArray[prettyPhoto.arrayPosition]).attr("title"))}else{A("div.pictureHolder .description").text("")}}else{if(A(prettyPhoto.caller).attr("title")){A("div.pictureHolder .description").text(A(prettyPhoto.caller).attr("title"))}else{A("div.pictureHolder .description").text("")}}},centerPicture:function(){var B=A("div.pictureHolder").offset();A("div.pictureHolder").css({"top":B.top+prettyPhoto.getScroll()-A("div.pictureHolder").height()/2,"left":B.left-A("div.pictureHolder").width()/2})},preload:function(){imgPreloader=new Image();A("div.pictureHolder .content").css("overflow","hidden");if(prettyPhoto.isSet){A("div.pictureHolder #fullResImage").attr("src",A(prettyPhoto.imagesArray[prettyPhoto.arrayPosition]).attr("href"));$image_url=A(prettyPhoto.imagesArray[prettyPhoto.arrayPosition]).attr("href")}else{A("div.pictureHolder #fullResImage").attr("src",A(prettyPhoto.caller).attr("href"));$image_url=A(prettyPhoto.caller).attr("href")}imgPreloader.onload=function(){setTimeout("prettyPhoto.showimage(imgPreloader.width,imgPreloader.height)",500)};imgPreloader.src=$image_url},showimage:function(C,B){prettyPhoto.checkPosition();A("div.pictureHolder .details").width(C);A("div.pictureHolder .details p.description").width(C-parseFloat(A("div.pictureHolder a.close").css("width")));containerHeight=B+parseFloat(A("div.pictureHolder .details").height())+parseFloat(A("div.pictureHolder .top").height())+parseFloat(A("div.pictureHolder .bottom").height());contentHeight=B+parseFloat(A("div.pictureHolder .details").height())+parseFloat(A("div.pictureHolder .details").css("margin-top"))+parseFloat(A("div.pictureHolder .details").css("margin-bottom"));containerWidth=C+parseFloat(A("div.pictureHolder .content").css("padding-left"))+parseFloat(A("div.pictureHolder .content").css("padding-right"))+prettyPhoto.options["padding"];A("div.pictureHolder .content").animate({"height":contentHeight},prettyPhoto.options["animationSpeed"]);A("div.pictureHolder").animate({"top":prettyPhoto.getScroll()+((A(window).height()/2)-(containerHeight/2)),"left":((A(window).width()/2)-(containerWidth/2)),"width":containerWidth,"height":containerHeight},prettyPhoto.options["animationSpeed"],function(){prettyPhoto.shownav();A("#fullResImage").show();A("div.pictureHolder #fullResImage").fadeTo(prettyPhoto.options["animationSpeed"],1,function(){A("div.pictureHolder .hoverContainer").height(B)})})},shownav:function(){if(prettyPhoto.isSet){A("div.pictureHolder .hoverContainer").fadeIn()}A("div.pictureHolder .details").fadeIn();A(".loaderIcon").hide()},buildOverlay:function(){backgroundDiv="<div class='prettyPhotoOverlay'></div>";A("body").append(backgroundDiv);A("div.prettyPhotoOverlay").css("height",A(document).height());A(".prettyPhotoOverlay").bind("click",function(){prettyPhoto.close()});pictureHolder='<div class="pictureHolder"><div class="top"><div class="left"></div><div class="middle"></div><div class="right"></div></div><div class="content"><div class="loaderIcon"></div><div class="hoverContainer"><a class="next" href="#">next</a><a class="previous" href="#">previous</a></div><img id="fullResImage" src="" style="display:none;" /><div class="details clearfix"><a class="close" href="#">Close</a><p class="description"></p><p class="currentTextHolder"><span class="currentText"><span>0</span>/<span class="total">0</span></span></p></div></div><div class="bottom"><div class="left"></div><div class="middle"></div><div class="right"></div></div></div>';A("body").append(pictureHolder);A(".pictureHolder").css({"opacity":0});A("a.close").bind("click",function(){prettyPhoto.close();return false});A(".pictureHolder .previous").bind("click",function(){prettyPhoto.previous();return false});A(".pictureHolder .next").bind("click",function(){prettyPhoto.next();return false});if(!prettyPhoto.isSet){A(".hoverContainer").hide();A(".currentTextHolder").hide()}A("div.prettyPhotoOverlay").css("opacity",0);A("div.prettyPhotoOverlay").fadeTo(prettyPhoto.options["animationSpeed"],0.35,function(){A("div.pictureHolder").fadeTo(prettyPhoto.options["animationSpeed"],1,function(){A("div.pictureHolder").attr("style","left:"+A("div.pictureHolder").css("left")+";top:"+A("div.pictureHolder").css("top")+";")})})},getScroll:function(){scrollTop=window.pageYOffset||document.documentElement.scrollTop||0;return scrollTop},close:function(){A("div.pictureHolder").fadeTo(prettyPhoto.options["animationSpeed"],0,function(){A("div.prettyPhotoOverlay").fadeTo(prettyPhoto.options["animationSpeed"],0,function(){A("div.prettyPhotoOverlay").remove();A("div.pictureHolder").remove()})})}}})(jQuery)